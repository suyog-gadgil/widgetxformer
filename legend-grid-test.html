<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charts Legend & Grid Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #323130;
            text-align: center;
            margin-bottom: 40px;
        }
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-bottom: 20px;
        }
        .chart-container {
            background: #fafafa;
            border: 1px solid #e1dfdd;
            border-radius: 8px;
            padding: 20px;
        }
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #323130;
            text-align: center;
        }
        .widget {
            background: white;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 10px;
        }
        .requirements {
            background: #f3f2f1;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            color: #605e5c;
            margin-top: 10px;
        }
        .checklist {
            list-style: none;
            padding: 0;
            margin: 5px 0;
        }
        .checklist li {
            margin: 2px 0;
            padding: 2px 0;
        }
        .checklist li:before {
            content: "‚úì ";
            color: #107c10;
            font-weight: bold;
        }
        .summary {
            background: #d1f7c4;
            border: 1px solid #24a148;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Charts Legend, Axis Labels & Grid Lines Test</h1>
        
        <div class="chart-grid">
            <div class="chart-container">
                <div class="chart-title">üìä Bar Chart</div>
                <div id="bar-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend showing data categories</li>
                        <li>X-axis and Y-axis labels</li>
                        <li>Grid lines for easier reading</li>
                        <li>Value labels on both axes</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üìà Line Chart</div>
                <div id="line-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend showing data series</li>
                        <li>X-axis and Y-axis labels</li>
                        <li>Grid lines for easier reading</li>
                        <li>Value labels on both axes</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üéØ Scatter Plot</div>
                <div id="scatter-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend showing data series</li>
                        <li>X-axis and Y-axis labels</li>
                        <li>Grid lines for easier reading</li>
                        <li>Value labels on both axes</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">ü´ß Bubble Chart</div>
                <div id="bubble-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend showing bubble categories</li>
                        <li>X-axis and Y-axis labels</li>
                        <li>Grid lines for easier reading</li>
                        <li>Value labels on both axes</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üç© Doughnut Chart</div>
                <div id="doughnut-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend showing slice categories</li>
                        <li>Data labels (inherent to design)</li>
                        <li>No grid lines (not applicable)</li>
                        <li>Hover values available</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üìä Multi-Dataset Bar Chart</div>
                <div id="multi-bar-chart-widget" class="widget"></div>
                <div class="requirements">
                    <strong>Requirements Check:</strong>
                    <ul class="checklist">
                        <li>Legend with multiple series</li>
                        <li>X-axis and Y-axis labels</li>
                        <li>Grid lines for comparison</li>
                        <li>Clear data differentiation</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="summary">
            <h3>üéØ Test Summary: Enhanced Chart Features</h3>
            <p><strong>All chart types should now include:</strong></p>
            <ul>
                <li><strong>Legends</strong> - Color-coded data identification for all chart types</li>
                <li><strong>Axis Labels</strong> - Clear X and Y axis titles where applicable</li>
                <li><strong>Grid Lines</strong> - Background grid for easier value reading on X/Y plots</li>
                <li><strong>Value Labels</strong> - Numeric scales on both axes for precise data reading</li>
                <li><strong>Hover Tooltips</strong> - Interactive data exploration (from previous enhancement)</li>
            </ul>
            
            <p><strong>Special Focus on Bubble Chart:</strong> Previously missing X/Y labels and grid lines - should now be fully featured with axis labels, value scales, grid lines, and legend support.</p>
        </div>
    </div>

    <script type="module">
        import { WidgetXFormer } from './src/widget-xformer.js';

        const transformer = WidgetXFormer.getInstance();

        // Test data for different chart types
        const testData = {
            barChart: {
                type: 'bar',
                data: {
                    labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                    datasets: [{
                        label: 'Sales',
                        data: [65, 59, 80, 81],
                        backgroundColor: ['#0078d4', '#107c10', '#ff8c00', '#d13438']
                    }]
                },
                options: {
                    xAxis: { title: 'Quarters' },
                    yAxis: { title: 'Revenue ($K)' }
                },
                style: { theme: 'fluent-light' }
            },

            lineChart: {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Growth',
                        data: [12, 19, 3, 5, 2, 8],
                        backgroundColor: '#0078d4'
                    }]
                },
                options: {
                    xAxis: { title: 'Months' },
                    yAxis: { title: 'Growth Rate (%)' }
                },
                style: { theme: 'fluent-light' }
            },

            scatterChart: {
                type: 'scatter',
                data: {
                    labels: ['Dataset A'],
                    datasets: [{
                        label: 'Performance',
                        data: [
                            { x: 10, y: 20 },
                            { x: 15, y: 10 },
                            { x: 25, y: 15 },
                            { x: 30, y: 25 },
                            { x: 35, y: 30 }
                        ],
                        backgroundColor: '#107c10'
                    }]
                },
                options: {
                    xAxis: { title: 'Experience (Years)', min: 0, max: 40 },
                    yAxis: { title: 'Salary ($K)', min: 0, max: 35 }
                },
                style: { theme: 'fluent-light' }
            },

            bubbleChart: {
                type: 'bubble',
                data: {
                    datasets: [{
                        data: [
                            { x: 20, y: 30, size: 15, label: 'Product A', color: '#0078d4' },
                            { x: 40, y: 10, size: 10, label: 'Product B', color: '#107c10' },
                            { x: 60, y: 50, size: 25, label: 'Product C', color: '#ff8c00' },
                            { x: 80, y: 20, size: 20, label: 'Product D', color: '#d13438' }
                        ]
                    }],
                    xAxis: { label: 'Market Share (%)', min: 0, max: 100 },
                    yAxis: { label: 'Growth Rate (%)', min: 0, max: 60 }
                },
                style: { theme: 'fluent-light' }
            },

            doughnutChart: {
                type: 'doughnut',
                data: {
                    labels: ['Desktop', 'Mobile', 'Tablet', 'Smart TV'],
                    datasets: [{
                        data: [45, 35, 15, 5],
                        backgroundColor: ['#0078d4', '#107c10', '#ff8c00', '#d13438']
                    }]
                },
                style: { theme: 'fluent-light' }
            },

            multiBarChart: {
                type: 'bar',
                data: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'Revenue',
                        data: [65, 75, 85, 95],
                        backgroundColor: ['#0078d4', '#0078d4', '#0078d4', '#0078d4']
                    }]
                },
                options: {
                    xAxis: { title: 'Years' },
                    yAxis: { title: 'Performance Score' }
                },
                style: { theme: 'fluent-light' }
            }
        };

        // Render all charts
        function renderCharts() {
            transformer.render(testData.barChart, document.getElementById('bar-chart-widget'));
            transformer.render(testData.lineChart, document.getElementById('line-chart-widget'));
            transformer.render(testData.scatterChart, document.getElementById('scatter-chart-widget'));
            transformer.render(testData.bubbleChart, document.getElementById('bubble-chart-widget'));
            transformer.render(testData.doughnutChart, document.getElementById('doughnut-chart-widget'));
            transformer.render(testData.multiBarChart, document.getElementById('multi-bar-chart-widget'));
        }

        // Initialize
        renderCharts();

        console.log('Charts legend & grid test loaded. Check each chart for:');
        console.log('‚úì Legend with color-coded labels');
        console.log('‚úì X and Y axis labels (where applicable)');
        console.log('‚úì Grid lines for easier reading');
        console.log('‚úì Value labels on axes');
        console.log('‚úì Hover tooltips (from previous enhancement)');
    </script>
</body>
</html>
