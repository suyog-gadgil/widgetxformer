<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformed Widgets using WidgetXFormer</title>
    
    <!-- Import WidgetXFormer styles -->
    <link rel="stylesheet" href="./src/style.css">
    
    <style>
        /* Custom styles for a polished look */
        body {
            font-family: 'Segoe UI', 'Segoe UI Web (West European)', -apple-system, BlinkMacSystemFont, Roboto, 'Helvetica Neue', sans-serif;
            background-color: #f3f2f1;
            margin: 0;
            padding: 20px;
        }
        .widget-card {
            background-color: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.14), 0 0px 2px rgba(0, 0, 0, 0.12);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid #e1e1e1;
            margin-bottom: 24px;
        }
        .widget-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.14), 0 0px 2px rgba(0, 0, 0, 0.12);
        }
        .widget-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #323130;
            margin-bottom: 16px;
            border-bottom: 1px solid #e1e1e1;
            padding-bottom: 12px;
        }
        .grid {
            display: grid;
            gap: 24px;
        }
        .grid-cols-1 { grid-template-columns: 1fr; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .col-span-2 { grid-column: span 2; }
        .col-span-3 { grid-column: span 3; }
        
        @media (min-width: 768px) {
            .md\\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
            .md\\:col-span-2 { grid-column: span 2; }
        }
        
        @media (min-width: 1024px) {
            .lg\\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
            .lg\\:col-span-3 { grid-column: span 3; }
        }
        
        .max-w-7xl {
            max-width: 80rem;
        }
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        .text-center {
            text-align: center;
        }
        .mb-12 {
            margin-bottom: 3rem;
        }
        .mt-4 {
            margin-top: 1rem;
        }
        .not-convertible {
            background-color: #fff4e6;
            border: 2px dashed #d83b01;
            color: #d83b01;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-style: italic;
        }
        .conversion-note {
            background-color: #e6f7ff;
            border-left: 4px solid #0078d4;
            padding: 16px;
            margin-bottom: 16px;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 style="font-size: 2.5rem; font-weight: 700; color: #323130;">Transformed Widgets using WidgetXFormer</h1>
            <p style="font-size: 1.125rem; color: #605e5c; max-width: 48rem; margin: 1rem auto 0;">All widgets converted to use the WidgetXFormer library with Fluent UI design tokens. Interactive widgets and visualizations rendered from JSON configuration.</p>
            
            <div class="conversion-note">
                <strong>Conversion Status:</strong> This page demonstrates how custom widget code from the original more-samples.html can be replaced with WidgetXFormer method calls. All widgets use Fluent UI design tokens for consistent styling.
            </div>
        </header>

        <!-- Widgets Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3">

            <!-- Profile Card -->
            <div class="widget-card">
                <h2 class="widget-title">Profile Card</h2>
                <div id="profile-card-demo"></div>
            </div>

            <!-- Stats Card -->
            <div class="widget-card">
                <h2 class="widget-title">Stats Card</h2>
                <div id="stats-card-demo"></div>
            </div>

            <!-- Notification Card -->
            <div class="widget-card">
                <h2 class="widget-title">Notification Card</h2>
                <div id="notification-card-demo"></div>
            </div>

            <!-- Progress Bar -->
            <div class="widget-card">
                <h2 class="widget-title">Progress Bar</h2>
                <div id="progress-bar-demo"></div>
            </div>

            <!-- KPI Donut Chart -->
            <div class="widget-card">
                <h2 class="widget-title">KPI Donut Chart</h2>
                <div id="kpi-donut-demo"></div>
            </div>

            <!-- Gauge -->
            <div class="widget-card">
                <h2 class="widget-title">System Load Gauge</h2>
                <div id="gauge-demo"></div>
            </div>

            <!-- Bar Chart -->
            <div class="widget-card">
                <h2 class="widget-title">Quarterly Revenue (Bar Chart)</h2>
                <div id="bar-chart-demo"></div>
            </div>

            <!-- Pie Chart -->
            <div class="widget-card">
                <h2 class="widget-title">Traffic Source (Pie Chart)</h2>
                <div id="pie-chart-demo"></div>
            </div>

            <!-- Line Chart -->
            <div class="widget-card">
                <h2 class="widget-title">User Signups (Line Chart)</h2>
                <div id="line-chart-demo"></div>
            </div>

            <!-- Scatter Plot -->
            <div class="widget-card">
                <h2 class="widget-title">Ad Spend vs. Conversions</h2>
                <div id="scatter-plot-demo"></div>
            </div>

            <!-- Bubble Chart -->
            <div class="widget-card">
                <h2 class="widget-title">Market Analysis</h2>
                <div id="bubble-chart-demo"></div>
            </div>

            <!-- Interactive Slider -->
            <div class="widget-card">
                <h2 class="widget-title">Interactive Control</h2>
                <div id="slider-demo"></div>
            </div>

            <!-- Heatmap Calendar -->
            <div class="widget-card md:col-span-2">
                <h2 class="widget-title">User Activity Heatmap</h2>
                <div id="heatmap-demo"></div>
            </div>

            <!-- Funnel Chart -->
            <div class="widget-card">
                <h2 class="widget-title">Sales Funnel</h2>
                <div id="funnel-demo"></div>
            </div>

            <!-- Data Table -->
            <div class="widget-card md:col-span-2">
                <h2 class="widget-title">Filterable Project List</h2>
                <div id="table-demo"></div>
            </div>

            <!-- Timeline - Vertical -->
            <div class="widget-card lg:col-span-3">
                <h2 class="widget-title">Vertical Timeline with Icons</h2>
                <div id="timeline-vertical-demo"></div>
            </div>

            <!-- Timeline - Horizontal -->
            <div class="widget-card lg:col-span-3">
                <h2 class="widget-title">Horizontal Timeline</h2>
                <div id="timeline-horizontal-demo"></div>
            </div>

            <!-- Timeline - Alternating -->
            <div class="widget-card lg:col-span-3">
                <h2 class="widget-title">Alternating Timeline</h2>
                <div id="timeline-alternating-demo"></div>
            </div>

            <!-- NOT CONVERTIBLE WIDGETS -->
            
            <!-- Interactive Map -->
            <div class="widget-card md:col-span-2">
                <h2 class="widget-title">Interactive Map</h2>
                <div class="not-convertible">
                    <strong>Not Convertible</strong><br>
                    Interactive Leaflet.js map requires specialized mapping library integration.<br>
                    Reason: WidgetXFormer's worldmap widget uses a different approach with country-based data rather than marker-based interactive maps.
                </div>
            </div>

            <!-- Custom Styled Timeline Components -->
            <div class="widget-card lg:col-span-3">
                <h2 class="widget-title">Custom CSS Timeline Styles</h2>
                <div class="not-convertible">
                    <strong>Partially Convertible</strong><br>
                    The complex CSS-based timeline styling with custom clip-paths, alternating layouts, and specific positioning would require custom CSS.<br>
                    Reason: WidgetXFormer timeline uses Fluent UI design tokens and may not exactly replicate the complex custom CSS styling from the original.
                </div>
            </div>

        </div>
    </div>

    <!-- Import WidgetXFormer -->
    <script type="module">
        import WidgetXFormer from './src/widget-xformer.js';

        const widgetXFormer = WidgetXFormer.getInstance();
        const theme = 'light'; // Using Fluent UI light theme

        // Initialize all convertible widgets
        function initializeWidgets() {
            console.log('Starting widget initialization...');
            
            try {
            // Profile Card
            console.log('Rendering profile card...');
            widgetXFormer.render({
                type: 'profile-card',
                data: {
                    avatar: 'https://placehold.co/100x100/60a5fa/ffffff?text=AV',
                    name: 'Alex Vance',
                    title: 'Lead Developer',
                    department: 'Engineering Team',
                    email: 'alex.vance@company.com',
                    phone: '+1 (555) 123-4567',
                    location: 'San Francisco, CA',
                    skills: ['JavaScript', 'React', 'Node.js', 'Leadership'],
                    bio: 'Experienced lead developer with expertise in full-stack development and team leadership.'
                },
                style: { theme }
            }, 'profile-card-demo');

            // Stats Card
            console.log('Rendering stats card...');
            widgetXFormer.render({
                type: 'stats-card',
                data: {
                    title: 'New Users',
                    value: '1,257',
                    subtitle: '+12% from last week',
                    icon: 'users',
                    color: '#3b82f6',
                    backgroundColor: '#3b82f6'
                },
                style: { theme }
            }, 'stats-card-demo');

            // Notification Card
            console.log('Rendering notification card...');
            widgetXFormer.render({
                type: 'notification-card',
                data: {
                    type: 'success',
                    title: 'Deployment Successful',
                    message: 'Your project has been successfully deployed to production.',
                    timestamp: '2024-01-15T10:30:00Z',
                    actions: [
                        { label: 'View Details', type: 'primary' }
                    ]
                },
                style: { theme }
            }, 'notification-card-demo');

            // Progress Bar
            console.log('Rendering progress bar...');
            widgetXFormer.render({
                type: 'progress-bar',
                data: {
                    label: 'Task Completion',
                    value: 75,
                    max: 100,
                    showPercentage: true,
                    showValue: true,
                    color: '#2563eb',
                    backgroundColor: '#e5e7eb',
                    height: 10,
                    animated: true
                },
                style: { theme }
            }, 'progress-bar-demo');

            // KPI Donut
            console.log('Rendering KPI donut...');
            widgetXFormer.render({
                type: 'kpi-donut',
                data: {
                    title: 'Sales Target Achievement',
                    value: 82,
                    target: 100,
                    unit: '%',
                    color: '#0078d4',
                    backgroundColor: '#f3f2f1',
                    size: 150,
                    showTarget: true,
                    showPercentage: true
                },
                style: { theme }
            }, 'kpi-donut-demo');

            // Gauge
            console.log('Rendering gauge...');
            widgetXFormer.render({
                type: 'gauge',
                data: {
                    title: 'System Load',
                    value: 65,
                    min: 0,
                    max: 100,
                    unit: '%',
                    color: '#107c10',
                    dangerZone: 90,
                    warningZone: 75,
                    size: 180,
                    showValue: true,
                    animated: true
                },
                style: { theme }
            }, 'gauge-demo');

            // Bar Chart
            console.log('Rendering bar chart...');
            widgetXFormer.render({
                type: 'bar',
                data: {
                    labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                    datasets: [{
                        label: 'Revenue in USD (Millions)',
                        data: [12, 19, 9, 15],
                        backgroundColor: 'rgba(59, 130, 246, 0.5)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    xAxis: { title: 'Quarter' },
                    yAxis: { title: 'Revenue ($ Millions)' }
                },
                style: { theme }
            }, 'bar-chart-demo');

            // Pie Chart
            console.log('Rendering pie chart...');
            widgetXFormer.render({
                type: 'doughnut',
                data: {
                    labels: ['Organic Search', 'Direct', 'Referral', 'Social Media'],
                    datasets: [{
                        label: 'Traffic Sources',
                        data: [55, 25, 15, 5],
                        backgroundColor: ['#3B82F6', '#10B981', '#F59E0B', '#6366F1'],
                        hoverOffset: 4
                    }]
                },
                options: {
                    title: 'Website Traffic Sources Distribution'
                },
                style: { theme }
            }, 'pie-chart-demo');

            // Line Chart
            console.log('Rendering line chart...');
            widgetXFormer.render({
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'New Users',
                        data: [65, 59, 80, 81, 56, 55, 90],
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderColor: 'rgb(59, 130, 246)',
                        tension: 0.3
                    }]
                },
                options: {
                    xAxis: { title: 'Month' },
                    yAxis: { title: 'Number of Users' }
                },
                style: { theme }
            }, 'line-chart-demo');

            // Scatter Plot
            console.log('Rendering scatter plot...');
            widgetXFormer.render({
                type: 'scatter',
                title: 'Ad Spend vs. Conversions',
                data: {
                    datasets: [{
                        label: 'Campaign Performance',
                        data: Array.from({length: 20}, () => ({
                            x: Math.random() * 100,
                            y: Math.random() * 100
                        })),
                        backgroundColor: 'rgba(59, 130, 246, 0.6)'
                    }]
                },
                options: {
                    xAxis: { title: 'Ad Spend ($)', min: 0, max: 100 },
                    yAxis: { title: 'Conversions', min: 0, max: 100 }
                },
                style: { theme }
            }, 'scatter-plot-demo');

            // Bubble Chart
            console.log('Rendering bubble chart...');
            widgetXFormer.render({
                type: 'bubble',
                data: {
                    xAxis: {
                        label: 'Market Share (%)',
                        min: 0,
                        max: 50
                    },
                    yAxis: {
                        label: 'Revenue Growth (%)',
                        min: 0,
                        max: 40
                    },
                    datasets: [{
                        label: 'Product A',
                        data: [{x: 20, y: 30, r: 15, label: 'Product A'}],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)'
                    }, {
                        label: 'Product B',
                        data: [{x: 40, y: 15, r: 25, label: 'Product B'}],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)'
                    }, {
                        label: 'Product C',
                        data: [{x: 30, y: 25, r: 10, label: 'Product C'}],
                        backgroundColor: 'rgba(255, 206, 86, 0.6)'
                    }]
                },
                style: { theme }
            }, 'bubble-chart-demo');

            // Interactive Slider
            console.log('Rendering slider...');
            widgetXFormer.render({
                type: 'slider',
                data: {
                    label: 'Adjust Threshold',
                    value: 50,
                    min: 0,
                    max: 100,
                    step: 1,
                    unit: '',
                    showValue: true,
                    showRange: true,
                    color: '#0078d4',
                    description: 'This slider can be hooked up to dynamically update data in other widgets.',
                    onChange: (value) => {
                        console.log('Threshold changed to:', value);
                        // Could update other widgets here
                    }
                },
                style: { theme }
            }, 'slider-demo');

            // Heatmap Calendar
            console.log('Rendering heatmap...');
            widgetXFormer.render({
                type: 'heatmap',
                data: {
                    title: 'User Activity Heatmap (Last 13 weeks)',
                    columns: 7, // 7 days per week
                    rows: 13,   // 13 weeks
                    cellSize: 16,
                    showValues: false,
                    colorScale: {
                        min: '#ebedf0',
                        max: '#0078d4'
                    }
                    // Data will be auto-generated
                },
                style: { theme }
            }, 'heatmap-demo');

            // Funnel Chart
            console.log('Rendering funnel...');
            widgetXFormer.render({
                type: 'funnel',
                data: {
                    title: 'Sales Funnel',
                    stages: [
                        { label: 'Visitors', value: 100, color: '#60a5fa', percentage: '100%' },
                        { label: 'Sign Ups', value: 45, color: '#3b82f6', percentage: '45%' },
                        { label: 'Purchases', value: 15, color: '#2563eb', percentage: '15%' }
                    ],
                    showValues: true,
                    showPercentages: true
                },
                style: { theme }
            }, 'funnel-demo');

            // Data Table
            console.log('Rendering table...');
            widgetXFormer.render({
                type: 'table',
                data: {
                    headers: ['Project Name', 'Status', 'Team Lead', 'Due Date'],
                    rows: [
                        ['Project Alpha', 'Completed', 'Jane Doe', '2024-08-15'],
                        ['Project Beta', 'In Progress', 'John Smith', '2024-09-30'],
                        ['Project Gamma', 'On Hold', 'Alex Johnson', '2024-10-10'],
                        ['Data Migration', 'Overdue', 'Maria Garcia', '2024-07-01']
                    ]
                },
                options: {
                    filterable: true
                },
                style: { theme, fluentDesign: true }
            }, 'table-demo');

            // Vertical Timeline
            widgetXFormer.render({
                type: 'timeline',
                data: {
                    events: [
                        {
                            id: '1',
                            date: '2024-06-01',
                            title: 'Phase 1: Planning',
                            description: 'Initial requirements gathering and project kickoff.',
                            icon: 'ÔøΩ',
                            status: 'completed',
                            category: 'Planning'
                        },
                        {
                            id: '2',
                            date: '2024-07-15',
                            title: 'Phase 2: Design',
                            description: 'UI/UX mockups completed and prototype delivered.',
                            icon: 'üìê',
                            status: 'completed',
                            category: 'Design'
                        },
                        {
                            id: '3',
                            date: '2024-09-30',
                            title: 'Phase 3: Development',
                            description: 'Core features implemented and alpha build deployed.',
                            icon: 'üíª',
                            status: 'current',
                            category: 'Development'
                        },
                        {
                            id: '4',
                            date: '2024-11-01',
                            title: 'Phase 4: Launch',
                            description: 'Final testing complete and product launched.',
                            icon: 'üöÄ',
                            status: 'upcoming',
                            category: 'Launch'
                        }
                    ],
                    config: {
                        orientation: 'vertical',
                        layout: 'left',
                        showProgress: true,
                        showIcons: true,
                        animate: true,
                        interactive: true
                    }
                },
                style: { theme }
            }, 'timeline-vertical-demo');

            // Horizontal Timeline
            widgetXFormer.render({
                type: 'timeline',
                data: {
                    events: [
                        {
                            id: '1',
                            date: 'Q1',
                            title: 'Kickoff',
                            description: 'Project Start',
                            status: 'completed'
                        },
                        {
                            id: '2',
                            date: 'Q2',
                            title: 'Alpha',
                            description: 'Internal Release',
                            status: 'completed'
                        },
                        {
                            id: '3',
                            date: 'Q3',
                            title: 'Beta',
                            description: 'User Testing',
                            status: 'current'
                        },
                        {
                            id: '4',
                            date: 'Q4',
                            title: 'Launch',
                            description: 'Public Release',
                            status: 'upcoming'
                        }
                    ],
                    config: {
                        orientation: 'horizontal',
                        showProgress: true,
                        animate: true
                    }
                },
                style: { theme }
            }, 'timeline-horizontal-demo');

            // Alternating Timeline
            widgetXFormer.render({
                type: 'timeline',
                data: {
                    events: [
                        {
                            id: '1',
                            date: '2021',
                            title: 'Foundation',
                            description: 'Company founded and initial seed funding secured.',
                            status: 'completed'
                        },
                        {
                            id: '2',
                            date: '2022',
                            title: 'Growth',
                            description: 'Launched MVP, onboarded first 1,000 users.',
                            status: 'completed'
                        },
                        {
                            id: '3',
                            date: '2023',
                            title: 'Expansion',
                            description: 'Secured Series A funding and expanded team.',
                            status: 'completed'
                        },
                        {
                            id: '4',
                            date: '2024',
                            title: 'Scale',
                            description: 'Reached 100,000 active users and international launch.',
                            status: 'current'
                        }
                    ],
                    config: {
                        orientation: 'vertical',
                        layout: 'alternating',
                        showProgress: true,
                        animate: true,
                        groupBy: 'none'
                    }
                },
                style: { theme }
            }, 'timeline-alternating-demo');

            console.log('All widgets initialized successfully!');
            
            } catch (error) {
                console.error('Error initializing widgets:', error);
            }
        }

        // Initialize widgets when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeWidgets);
        
        // Initialize immediately if DOM is already loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeWidgets);
        } else {
            initializeWidgets();
        }

    </script>
</body>
</html>
