<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WidgetXFormer Demo - Interactive Dashboard</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #323130;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2.5rem;
        }

        .widget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .widget-container {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .widget-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .widget-title {
            margin: 0 0 1rem 0;
            color: #323130;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 0.75rem 1.5rem;
            background: #0078d4;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .controls button:hover {
            background: #106ebe;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 120, 212, 0.3);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .code-example {
            background: #2d2d2d;
            color: #ffffff;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>WidgetXFormer Demo</h1>
        <p>Transform JSON data into beautiful, interactive widgets</p>
    </div>

    <!-- Metrics Row -->
    <div class="metrics-row">
        <div class="widget-container">
            <div id="metric-users"></div>
        </div>
        <div class="widget-container">
            <div id="metric-revenue"></div>
        </div>
        <div class="widget-container">
            <div id="metric-conversion"></div>
        </div>
    </div>

    <!-- Main Widget Grid -->
    <div class="widget-grid">
        <!-- Tabs Widget -->
        <div class="widget-container">
            <h2 class="widget-title">Interactive Tabs</h2>
            <div id="demo-tabs"></div>
        </div>

        <!-- Doughnut Chart -->
        <div class="widget-container">
            <h2 class="widget-title">Coffee Bean Distribution</h2>
            <div id="demo-doughnut"></div>
        </div>

        <!-- Bar Chart -->
        <div class="widget-container">
            <h2 class="widget-title">Regional Production</h2>
            <div id="demo-bar"></div>
        </div>

        <!-- Line Chart -->
        <div class="widget-container">
            <h2 class="widget-title">Growth Trend</h2>
            <div id="demo-line"></div>
        </div>

        <!-- Accordion -->
        <div class="widget-container full-width">
            <h2 class="widget-title">Coffee Producer Details</h2>
            <div id="demo-accordion"></div>
        </div>

        <!-- Data Table -->
        <div class="widget-container full-width">
            <h2 class="widget-title">Production Statistics</h2>
            <div id="demo-table"></div>
        </div>

        <!-- Card Widget -->
        <div class="widget-container">
            <div id="demo-card"></div>
        </div>

        <!-- World Map Placeholder -->
        <div class="widget-container">
            <h2 class="widget-title">Global Distribution</h2>
            <div id="demo-worldmap"></div>
        </div>

        <!-- Timeline Widgets -->
        <div class="widget-container full-width">
            <h2 class="widget-title">Project Timeline - Vertical</h2>
            <div id="demo-timeline-vertical"></div>
        </div>

        <div class="widget-container full-width">
            <h2 class="widget-title">Company History - Horizontal</h2>
            <div id="demo-timeline-horizontal"></div>
        </div>

        <div class="widget-container full-width">
            <h2 class="widget-title">Development Roadmap - Grouped</h2>
            <div id="demo-timeline-grouped"></div>
        </div>

        <!-- New Widgets from more-samples.html -->
        <div class="widget-container">
            <h2 class="widget-title">üë§ Profile Card</h2>
            <div id="demo-profile-card"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üìä Stats Card</h2>
            <div id="demo-stats-card"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üîî Notification Card</h2>
            <div id="demo-notification-card"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üìà Progress Bar</h2>
            <div id="demo-progress-bar"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üéØ KPI Donut</h2>
            <div id="demo-kpi-donut"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">‚ö° Gauge</h2>
            <div id="demo-gauge"></div>
        </div>

        <div class="widget-container full-width">
            <h2 class="widget-title">üîΩ Funnel Chart</h2>
            <div id="demo-funnel"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üìç Scatter Plot</h2>
            <div id="demo-scatter"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üí≠ Bubble Chart</h2>
            <div id="demo-bubble"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üî• Heatmap</h2>
            <div id="demo-heatmap"></div>
        </div>

        <div class="widget-container">
            <h2 class="widget-title">üéöÔ∏è Interactive Slider</h2>
            <div id="demo-slider"></div>
        </div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button onclick="updateChartData()">Update Chart Data</button>
        <button onclick="changeTheme()">Toggle Theme</button>
        <button onclick="addNewWidget()">Add Widget</button>
        <button onclick="showCode()">Show Code Example</button>
    </div>

    <!-- Code Example (hidden by default) -->
    <div id="code-example" style="display: none;">
        <h3>Code Example:</h3>
        <div class="code-example">
const widgetXFormer = WidgetXFormer.getInstance();

// Render a chart with JSON data
const chartConfig = {
    type: 'doughnut',
    data: {
        labels: ['Arabica', 'Robusta', 'Liberica'],
        datasets: [{
            data: [75, 24, 1],
            backgroundColor: ['#8B4513', '#D2691E', '#CD853F']
        }]
    },
    style: { theme: 'default' }
};

widgetXFormer.render(chartConfig, 'my-chart-container');
        </div>
    </div>

    <script type="module">
        import WidgetXFormer from './src/widget-xformer.js';

        const widgetXFormer = WidgetXFormer.getInstance();
        let currentTheme = 'default';

        // Sample data configurations
        const configs = {
            tabs: {
                type: 'tabs',
                data: {
                    items: [
                        {
                            id: 'overview',
                            label: 'Overview',
                            content: 'Coffee is one of the most traded commodities globally, with over 2 billion cups consumed daily worldwide.'
                        },
                        {
                            id: 'production',
                            label: 'Production',
                            content: 'The top coffee-producing countries include Brazil, Vietnam, Colombia, and Indonesia, accounting for over 60% of global production.'
                        },
                        {
                            id: 'sustainability',
                            label: 'Sustainability',
                            content: 'Sustainable coffee farming practices are crucial for environmental conservation and farmer livelihoods.'
                        }
                    ]
                },
                style: { theme: currentTheme }
            },

            doughnut: {
                type: 'doughnut',
                data: {
                    labels: ['Arabica', 'Robusta', 'Liberica', 'Excelsa'],
                    datasets: [{
                        label: 'Coffee Bean Types',
                        data: [75, 24, 0.8, 0.2],
                        backgroundColor: ['#8B4513', '#D2691E', '#CD853F', '#DEB887']
                    }]
                },
                style: { theme: currentTheme }
            },

            bar: {
                type: 'bar',
                data: {
                    labels: ['South America', 'Asia', 'Africa', 'Central America', 'Oceania'],
                    datasets: [{
                        label: 'Annual Production (Million bags)',
                        data: [45.2, 32.8, 18.5, 15.3, 1.2],
                        backgroundColor: ['#0078d4', '#106ebe', '#005a9e', '#004578', '#003966']
                    }]
                },
                style: { theme: currentTheme }
            },

            line: {
                type: 'line',
                data: {
                    labels: ['2019', '2020', '2021', '2022', '2023'],
                    datasets: [{
                        label: 'Global Coffee Consumption (Million bags)',
                        data: [165, 167, 166, 170, 174],
                        backgroundColor: '#0078d4',
                        borderColor: '#0078d4'
                    }]
                },
                style: { theme: currentTheme }
            },

            accordion: {
                type: 'accordion',
                data: {
                    items: [
                        {
                            id: 'brazil',
                            title: 'Brazil - 37% of Global Production',
                            content: 'Brazil produces approximately 2.6 million metric tons of coffee annually, primarily high-quality Arabica beans from regions like Minas Gerais and S√£o Paulo.',
                            expanded: true
                        },
                        {
                            id: 'vietnam',
                            title: 'Vietnam - 16% of Global Production',
                            content: 'Vietnam specializes in Robusta beans and has become the world\'s second-largest coffee producer, with production concentrated in the Central Highlands.',
                            expanded: false
                        },
                        {
                            id: 'colombia',
                            title: 'Colombia - 8% of Global Production',
                            content: 'Colombian coffee is world-renowned for its quality, benefiting from ideal growing conditions in the Andes mountains and strict quality certifications.',
                            expanded: false
                        }
                    ]
                },
                style: { theme: currentTheme }
            },

            table: {
                type: 'table',
                data: {
                    headers: ['Country', 'Production (Million bags)', 'Market Share', 'Primary Bean Type'],
                    rows: [
                        ['Brazil', '45.2', '37%', 'Arabica'],
                        ['Vietnam', '29.5', '24%', 'Robusta'],
                        ['Colombia', '13.5', '11%', 'Arabica'],
                        ['Indonesia', '11.0', '9%', 'Robusta'],
                        ['Ethiopia', '7.5', '6%', 'Arabica']
                    ]
                },
                style: { theme: currentTheme }
            },

            card: {
                type: 'card',
                data: {
                    title: 'Did You Know?',
                    content: 'Coffee is the second most traded commodity in the world after oil, and it takes approximately 70 coffee beans to make a single cup of coffee!'
                },
                style: { theme: currentTheme }
            },

            worldmap: {
                type: 'worldmap',
                data: {
                    regions: [
                        { country: 'Brazil', value: 45.2 },
                        { country: 'Vietnam', value: 29.5 },
                        { country: 'Colombia', value: 13.5 }
                    ]
                },
                style: { theme: currentTheme }
            },

            timelineVertical: {
                type: 'timeline',
                data: {
                    events: [
                        {
                            id: '1',
                            date: '2024-01-15',
                            title: 'Project Kickoff',
                            description: 'Initial project planning and team formation. Defined scope, timeline, and resource allocation.',
                            category: 'Planning',
                            icon: 'üöÄ',
                            status: 'completed'
                        },
                        {
                            id: '2',
                            date: '2024-02-20',
                            title: 'Design Phase Complete',
                            description: 'Finalized UI/UX designs, wireframes, and user experience flows.',
                            category: 'Design',
                            icon: 'üé®',
                            status: 'completed'
                        },
                        {
                            id: '3',
                            date: '2024-04-10',
                            title: 'Development Milestone 1',
                            description: 'Core functionality implemented including user authentication and basic features.',
                            category: 'Development',
                            icon: 'üíª',
                            status: 'completed'
                        },
                        {
                            id: '4',
                            date: '2024-06-15',
                            title: 'Beta Testing Launch',
                            description: 'Released beta version to internal stakeholders and select customers for feedback.',
                            category: 'Testing',
                            icon: 'üß™',
                            status: 'current'
                        },
                        {
                            id: '5',
                            date: '2024-08-30',
                            title: 'Production Release',
                            description: 'Full production deployment with all features and comprehensive testing complete.',
                            category: 'Deployment',
                            icon: 'üéØ',
                            status: 'upcoming'
                        }
                    ],
                    config: {
                        orientation: 'vertical',
                        layout: 'alternating',
                        showProgress: true,
                        groupBy: 'none',
                        animate: true,
                        interactive: true,
                        dateFormat: 'MMM DD, YYYY'
                    }
                },
                style: { theme: currentTheme }
            },

            timelineHorizontal: {
                type: 'timeline',
                data: {
                    events: [
                        {
                            id: '1',
                            date: '2020-01-01',
                            title: 'Company Founded',
                            description: 'Started as a small startup with big dreams and innovative ideas.',
                            category: 'Milestone',
                            icon: 'üè¢',
                            status: 'completed'
                        },
                        {
                            id: '2',
                            date: '2021-06-15',
                            title: 'Series A Funding',
                            description: 'Raised $5M in Series A funding to accelerate growth and development.',
                            category: 'Funding',
                            icon: 'üí∞',
                            status: 'completed'
                        },
                        {
                            id: '3',
                            date: '2022-03-20',
                            title: '10,000 Users',
                            description: 'Reached the milestone of 10,000 active users on our platform.',
                            category: 'Growth',
                            icon: 'üë•',
                            status: 'completed'
                        },
                        {
                            id: '4',
                            date: '2023-09-10',
                            title: 'International Expansion',
                            description: 'Expanded operations to European and Asian markets.',
                            category: 'Expansion',
                            icon: 'üåç',
                            status: 'completed'
                        },
                        {
                            id: '5',
                            date: '2024-12-01',
                            title: 'IPO Launch',
                            description: 'Planning initial public offering to fuel next phase of growth.',
                            category: 'Milestone',
                            icon: 'üìà',
                            status: 'upcoming'
                        }
                    ],
                    config: {
                        orientation: 'horizontal',
                        layout: 'center',
                        showProgress: false,
                        compactMode: true,
                        animate: true,
                        interactive: true,
                        dateFormat: 'YYYY'
                    }
                },
                style: { theme: currentTheme }
            },

            timelineGrouped: {
                type: 'timeline',
                data: {
                    events: [
                        // 2024 Events
                        {
                            id: '1',
                            date: '2024-03-01',
                            title: 'Widget Library v2.0',
                            description: 'Major update with new timeline components and enhanced charting capabilities.',
                            category: 'Core Features',
                            icon: 'üì¶',
                            status: 'completed'
                        },
                        {
                            id: '2',
                            date: '2024-06-15',
                            title: 'Mobile Responsive Design',
                            description: 'Complete mobile optimization for all widget types.',
                            category: 'UI/UX',
                            icon: 'üì±',
                            status: 'current'
                        },
                        {
                            id: '3',
                            date: '2024-09-01',
                            title: 'Advanced Analytics',
                            description: 'Integration with analytics platforms and custom reporting.',
                            category: 'Analytics',
                            icon: 'üìä',
                            status: 'upcoming'
                        },
                        // 2025 Events
                        {
                            id: '4',
                            date: '2025-01-15',
                            title: 'AI-Powered Insights',
                            description: 'Machine learning integration for predictive analytics and smart recommendations.',
                            category: 'AI/ML',
                            icon: 'ü§ñ',
                            status: 'upcoming'
                        },
                        {
                            id: '5',
                            date: '2025-04-20',
                            title: 'Enterprise Features',
                            description: 'Advanced security, SSO integration, and enterprise-grade scalability.',
                            category: 'Enterprise',
                            icon: 'üè¢',
                            status: 'upcoming'
                        },
                        {
                            id: '6',
                            date: '2025-08-10',
                            title: 'API Marketplace',
                            description: 'Launch of public API marketplace for third-party integrations.',
                            category: 'Platform',
                            icon: 'üîó',
                            status: 'upcoming'
                        }
                    ],
                    config: {
                        orientation: 'vertical',
                        layout: 'left',
                        showProgress: true,
                        groupBy: 'year',
                        animate: true,
                        interactive: true,
                        dateFormat: 'MMM DD, YYYY',
                        showConnectors: true
                    }
                },
                style: { theme: currentTheme }
            },

            metrics: {
                users: {
                    type: 'metric',
                    data: { value: '2.4M', label: 'Daily Coffee Drinkers' },
                    style: { theme: currentTheme }
                },
                revenue: {
                    type: 'metric',
                    data: { value: '$24B', label: 'Global Market Value' },
                    style: { theme: currentTheme }
                },
                conversion: {
                    type: 'metric',
                    data: { value: '12.2kg', label: 'Per Capita Consumption' },
                    style: { theme: currentTheme }
                }
            }
        };

        // Initialize all widgets
        function initializeWidgets() {
            widgetXFormer.render(configs.tabs, 'demo-tabs');
            widgetXFormer.render(configs.doughnut, 'demo-doughnut');
            widgetXFormer.render(configs.bar, 'demo-bar');
            widgetXFormer.render(configs.line, 'demo-line');
            widgetXFormer.render(configs.accordion, 'demo-accordion');
            widgetXFormer.render(configs.table, 'demo-table');
            widgetXFormer.render(configs.card, 'demo-card');
            widgetXFormer.render(configs.worldmap, 'demo-worldmap');
            
            // Render timeline widgets
            widgetXFormer.render(configs.timelineVertical, 'demo-timeline-vertical');
            widgetXFormer.render(configs.timelineHorizontal, 'demo-timeline-horizontal');
            widgetXFormer.render(configs.timelineGrouped, 'demo-timeline-grouped');
            
            // Render new widgets from more-samples.html
            widgetXFormer.render({
                type: 'profile-card',
                data: {
                    avatar: 'https://via.placeholder.com/80x80/0078d4/ffffff?text=JD',
                    name: 'John Doe',
                    title: 'Senior Software Engineer',
                    department: 'Engineering',
                    email: 'john.doe@company.com',
                    phone: '+1 (555) 123-4567',
                    location: 'San Francisco, CA',
                    skills: ['JavaScript', 'TypeScript', 'React', 'Node.js'],
                    bio: 'Passionate developer with 8+ years of experience building scalable web applications.'
                },
                style: { theme: currentTheme }
            }, 'demo-profile-card');

            widgetXFormer.render({
                type: 'stats-card',
                data: {
                    title: 'Q4 Performance',
                    stats: [
                        { label: 'Revenue', value: '$2.4M', change: '+12%', trend: 'up' },
                        { label: 'Users', value: '45.2K', change: '+8%', trend: 'up' },
                        { label: 'Conversion', value: '3.2%', change: '-2%', trend: 'down' },
                        { label: 'Satisfaction', value: '4.8/5', change: '+0.2', trend: 'up' }
                    ]
                },
                style: { theme: currentTheme }
            }, 'demo-stats-card');

            widgetXFormer.render({
                type: 'notification-card',
                data: {
                    type: 'info',
                    title: 'System Update Available',
                    message: 'A new version of the application is available. Update now to get the latest features and security improvements.',
                    timestamp: '2024-01-15T10:30:00Z',
                    actions: [
                        { label: 'Update Now', type: 'primary' },
                        { label: 'Remind Later', type: 'secondary' }
                    ]
                },
                style: { theme: currentTheme }
            }, 'demo-notification-card');

            widgetXFormer.render({
                type: 'progress-bar',
                data: {
                    label: 'Project Completion',
                    value: 68,
                    max: 100,
                    showPercentage: true,
                    showValue: true,
                    color: '#107c10',
                    backgroundColor: '#f3f2f1',
                    height: 20,
                    animated: true
                },
                style: { theme: currentTheme }
            }, 'demo-progress-bar');

            widgetXFormer.render({
                type: 'kpi-donut',
                data: {
                    title: 'Sales Target',
                    value: 75,
                    target: 100,
                    unit: '%',
                    color: '#0078d4',
                    backgroundColor: '#f3f2f1',
                    size: 120,
                    showTarget: true,
                    showPercentage: true
                },
                style: { theme: currentTheme }
            }, 'demo-kpi-donut');

            widgetXFormer.render({
                type: 'gauge',
                data: {
                    title: 'Server Performance',
                    value: 78,
                    min: 0,
                    max: 100,
                    unit: '%',
                    color: '#107c10',
                    dangerZone: 90,
                    warningZone: 75,
                    size: 150,
                    showValue: true,
                    animated: true
                },
                style: { theme: currentTheme }
            }, 'demo-gauge');

            widgetXFormer.render({
                type: 'funnel',
                data: {
                    title: 'Sales Funnel 2024',
                    stages: [
                        { label: 'Visitors', value: 10000, color: '#0078d4' },
                        { label: 'Leads', value: 2500, color: '#106ebe' },
                        { label: 'Prospects', value: 750, color: '#005a9e' },
                        { label: 'Customers', value: 150, color: '#004578' }
                    ],
                    showValues: true,
                    showPercentages: true
                },
                style: { theme: currentTheme }
            }, 'demo-funnel');

            widgetXFormer.render({
                type: 'scatter',
                data: {
                    title: 'Performance vs Experience',
                    xAxis: { label: 'Years of Experience', min: 0, max: 15 },
                    yAxis: { label: 'Performance Score', min: 0, max: 100 },
                    data: [
                        { x: 2, y: 65, label: 'Alice' },
                        { x: 5, y: 78, label: 'Bob' },
                        { x: 8, y: 85, label: 'Carol' },
                        { x: 3, y: 70, label: 'David' },
                        { x: 12, y: 92, label: 'Eve' },
                        { x: 7, y: 82, label: 'Frank' },
                        { x: 10, y: 88, label: 'Grace' }
                    ],
                    pointColor: '#0078d4',
                    pointSize: 6
                },
                style: { theme: currentTheme }
            }, 'demo-scatter');

            widgetXFormer.render({
                type: 'bubble',
                data: {
                    title: 'Market Analysis',
                    xAxis: { label: 'Market Share (%)', min: 0, max: 50 },
                    yAxis: { label: 'Growth Rate (%)', min: -10, max: 30 },
                    data: [
                        { x: 25, y: 15, size: 50, label: 'Product A', color: '#0078d4' },
                        { x: 15, y: 20, size: 30, label: 'Product B', color: '#107c10' },
                        { x: 35, y: 8, size: 40, label: 'Product C', color: '#d13438' },
                        { x: 20, y: 25, size: 25, label: 'Product D', color: '#ca5010' },
                        { x: 10, y: -5, size: 20, label: 'Product E', color: '#8764b8' }
                    ]
                },
                style: { theme: currentTheme }
            }, 'demo-bubble');

            widgetXFormer.render({
                type: 'heatmap',
                data: {
                    title: 'Website Activity Heatmap',
                    data: [
                        [1, 2, 3, 4, 3, 2, 1],
                        [2, 4, 6, 8, 6, 4, 2],
                        [3, 6, 9, 12, 9, 6, 3],
                        [4, 8, 12, 16, 12, 8, 4],
                        [3, 6, 9, 12, 9, 6, 3],
                        [2, 4, 6, 8, 6, 4, 2],
                        [1, 2, 3, 4, 3, 2, 1]
                    ],
                    xLabels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    yLabels: ['12 AM', '4 AM', '8 AM', '12 PM', '4 PM', '8 PM', '11 PM'],
                    colorScale: {
                        min: '#e1f5fe',
                        max: '#0277bd'
                    },
                    cellSize: 30,
                    showValues: true
                },
                style: { theme: currentTheme }
            }, 'demo-heatmap');

            widgetXFormer.render({
                type: 'slider',
                data: {
                    label: 'Budget Allocation',
                    value: 75000,
                    min: 0,
                    max: 200000,
                    step: 5000,
                    unit: '$',
                    showValue: true,
                    showRange: true,
                    color: '#0078d4',
                    onChange: (value) => console.log('Budget changed to:', value)
                },
                style: { theme: currentTheme }
            }, 'demo-slider');
            
            // Render metrics
            widgetXFormer.render(configs.metrics.users, 'metric-users');
            widgetXFormer.render(configs.metrics.revenue, 'metric-revenue');
            widgetXFormer.render(configs.metrics.conversion, 'metric-conversion');
        }

        // Global functions for buttons
        window.updateChartData = function() {
            const newBarConfig = {
                ...configs.bar,
                data: {
                    labels: ['Brazil', 'Vietnam', 'Colombia'],
                    datasets: [{
                        label: 'Top 3 Producers (Million bags)',
                        data: [45.2, 29.5, 13.5],
                        backgroundColor: ['#228B22', '#FF6347', '#FFD700']
                    }]
                }
            };
            widgetXFormer.render(newBarConfig, 'demo-bar');
        };

        window.changeTheme = function() {
            currentTheme = currentTheme === 'default' ? 'dark' : 'default';
            
            // Update all configs with new theme
            Object.keys(configs).forEach(key => {
                if (key === 'metrics') {
                    Object.keys(configs.metrics).forEach(metricKey => {
                        configs.metrics[metricKey].style.theme = currentTheme;
                    });
                } else {
                    configs[key].style.theme = currentTheme;
                }
            });
            
            // Re-render all widgets
            initializeWidgets();
            
            // Update body background
            document.body.style.backgroundColor = currentTheme === 'dark' ? '#2d2d2d' : '#f8f9fa';
            document.body.style.color = currentTheme === 'dark' ? '#ffffff' : '#323130';
        };

        window.addNewWidget = function() {
            const newMetric = {
                type: 'metric',
                data: { 
                    value: Math.floor(Math.random() * 100) + 'K', 
                    label: 'Random Metric' 
                },
                style: { theme: currentTheme }
            };
            
            // Create new container
            const newContainer = document.createElement('div');
            newContainer.className = 'widget-container';
            newContainer.innerHTML = '<div id="new-metric-' + Date.now() + '"></div>';
            document.querySelector('.metrics-row').appendChild(newContainer);
            
            // Render widget
            widgetXFormer.render(newMetric, newContainer.firstElementChild.id);
        };

        window.showCode = function() {
            const codeExample = document.getElementById('code-example');
            codeExample.style.display = codeExample.style.display === 'none' ? 'block' : 'none';
        };

        // Initialize on page load
        initializeWidgets();
    </script>
</body>
</html>
